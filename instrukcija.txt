Vardas, pavardė:
Lukas Bačinskas

---

Tema:
"Virusais užkrėstų interneto puslapių atpažinimo ir šalinimo sistema"

---

INSTRUKCIJA PILNAM SISTEMOS KONFIGŪRVIMUI (šito žingsnio daryti nereikia jeigu tenkina programos veikimas be 4-os funkcijos "Vulnerabilities Checker"):
Norint pilno sistemos funkcionalumo reikės Linux serverio (Idealiausiai Ubuntu 18+), kuriame yra instaliuotas docker ir docker-compose. Tuomet reikia sukelti visą "iskander-api" aplankalą su turiniu į serverį, pavyzdžiui į "/var/www/html/" direktoriją (reikės 6-ame žingsnyje).
Konfigūracijos failas su prisijungimais i duomenų bazę yra "/var/www/html/iskander-api/.env"

Komandos, kurias reikia paleisti nuosekliai:
1. netstat -tulpn | grep -E '80|3306' (Komanda parodo visus procesus kurie yra aktyvūs po 80 ir 3306 prievadu.)
2. systemctl stop mysql (Komanda sustabdo MySQL servisą.)
3. systemctl status mysql (Komanda parodo MySQL serviso statusą, turi būti išjungtas.)
4. netstat -anp --numeric-ports | grep ":80\>.*:" | grep -o "[0-9]*/" | sed 's+/$++' | xargs -d '\n' kill -KILL (Komanda išjungia visus servisus ant 80-ojo prievado.)
5. netstat -anp --numeric-ports | grep ":3306\>.*:" | grep -o "[0-9]*/" | sed 's+/$++' | xargs -d '\n' kill -KILL (Komanda išjungia visus servisus ant 3306-ojo prievado.)
6. cd /var/www/html/iskander-api/ (Komanda nuveda į projekto direktoriją. Čia reikia sukelti iskander-api aplankalo turinį jei to dar nepadarėte.)
7. docker ps
8. docker-compose down -v
9. docker-compose up -d (Komanda kompiliuoja viską keletą minučių, ir galų galę neturėtų grąžinti jokių klaidų jei viskas pavyko sėkmingai.)
10. docker ps (Komanda turi parodyti jog visi keturi docker konteineriai yra aktyvūs: iskander_phpmyadmin, iskander_api, iskander_worker, iskander_database.)

Galime patikrinti ar viskas susikonfigūravo kaip priklauso (turėtume matyti "This endpoint expects a POST request with JSON" tekstą), aplankydami:
http://SERVERIO_IP/core
http://SERVERIO_IP/plugins
http://SERVERIO_IP/theme

Tuomet, reikia importuoti duomenų bazę (iskander_data.sql failą) į http://SERVERIO_IP:3307/
Prie phpMyAdmin prisijungti galima naudojant duomenis kuriuos turite nusirodyti faile "iskander-api/.env", pavyzdžiui:
Server: serverio IP adresas
Username: reikšmė iš MYSQL_USER laukelio
Password: reikšmė iš MYSQL_PASSWORD laukelio

Prisijungus einame į Import -> Choose file ir pasirenkame iskander_data.sql failą. Sukėlus, gali mesti raudoną error klaidą, tačiau duomenys visvien bus sukelti (turi būti dvi lentelės: patchstack, api_log).
Pakeičiame fix.sh faile esantį IP adresą į savo serverio IP adresą šiose eilutėse: 666, 668, 670, 685, 687, 689, 707, 708, 709.

Tuomet lieka pasileisti pačią fix.sh sistemą (skaityti "INSTRUKCIJA SISTEMOS NAUDOJIMUI").

---

INSTRUKCIJA SISTEMOS NAUDOJIMUI (be "Vulnerabilities Checker" funckionalumo):
Norint išmėginti sistemą, prisijungus prie internetinės svetainės webserverio ir nuėjus į jos failų direktoriją yra įkeliamas suteiktas fix.sh failas (dažniausiai tai būna /public_html/ direktorija) ir leidžiame komandą:
1. bash fix.sh

Darbinėje praktikoje yra naudojamas komandos trumpinys, tad specialistams užtenka parašyti vieną žodį norint iškviesti šią sistemą.
Jeigu niekaip nepavyksta pasileisti sistemos, galite iškviesti šią komandą (veiks visos funkcijos):
1. curl -O https://raw.githubusercontent.com/Bremboo/malware-fix/main/fix.sh ; bash fix.sh
